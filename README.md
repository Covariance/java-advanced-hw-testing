# java-advanced-hw-testing
Инструкции по настройке тестов (в том числе кастомных) для домашек по Java Advanced.

Также в репозитории находятся новые старые тесты, на которых может быть очень полезно погонять ваше решение.

### Шаг 1
Склонируйте реп и откройте его в IDEA.
```shell script
> git clone https://www.kgeorgiy.info/git/geo/java-advanced-2021
```

Все должно светится красным.

### Шаг 2
Открываем `File -> Project Structure -> Modules`, видим следующую картину:
![](img/1.png)

Теперь нам надо добавить в сурсы модулям **base** и **walk** либы, которые у нас лежат в виде джарников.
Делается это так - нажимаем на модуль, нажимаем на `+`, выбираем `library`, открывается такое меню:
![](img/2.png)

Здесь надо выбрать папку `lib`. Повторяем это для обоих модулей.

#### Это важный чекпоинт - сейчас у вас не должно быть красных подчеркиваний в Гошиных файлах. Если это не так, перезапустите IDEA.

### Шаг 3

Создаем свой модуль. Для этого во всё том же `Project Structure` нажимаем `+` над списком модулей,
следуем по инструкции, кладем его в пакет к двум другим модулям.

![](img/3.png)

Теперь аккуратно, следите за руками. Надо открыть наш модуль, в нём вкладку `Sources` и удалить оттуда
папку `src` (физически папка не удалится).

После этого надо добавить туда корень нашего модуля (он отображается как `.`). 

![](img/4.png)
![](img/6.png)

Далее, надо добавить нашему модулю в сурсы либы и Гошины модули. Либы мы уже добавляли, модули добавляются так же.

![](img/5.png)

Теперь в модуле нужно создать [module-info](module-info.java) именно с таким контентом.
Затем создаём в нашем модуле пакет с названием как у модуля и внутри - наши файлы с решением.
Это почти все.

![](img/7.png)

### Шаг 4 - кастомные тесты

В нашем пакете создаем [CustomTester](CustomTester.java). Он экстендит Гошин оригинальный тестер без
изменений кроме `psvm` потому, что мы не хотим менять оригинальные тесты.

Кроме этого, создаем там же [CustomTest](CustomTest.java). Это файл, где мы будем хранить кастомные тесты.

*Ремарка: можно не экстендить `RecursiveWalkTest`, тогда при запуске конфигурации будут гоняться 
__только__ кастомные тесты.*

Теперь идем в конфигурации, нажимаем `Add Configuration... -> + -> Application`, конфиг делаем
в точности такой (имя можно менять):

![](img/8.png)

Все. Теперь при запуске этой конфигурации у вас будут гонять все тесты. Если хотите запустить только
Гошины, то в строке `Program arguments` замените `Custom` на те тесты, которые вам нужны 
(вероятно, `Recursive`).

### Шаг 5 - как удобно решать таски

Авторский совет — решайте таски в своём клоне этого репозитория (где тесты), а когда решили — 
пушьте в личный репозиторий. Дальше гайд от меня, как сделать ваш опыт сдачи чуть приятнее и удобнее.

Когда клонируете свой репозиторий, используйте команду
```shell
> git clone http://ФАМИЛИЯ_ИМЯ:ПАРОЛЬ@www.kgeorgiy.info/git-students/year2019/ФАМИЛИЯ_ИМЯ/java-advanced
```

Если же вы уже клонировали его, то можно использовать команду

```shell
> git remote set-url origin http://ФАМИЛИЯ_ИМЯ:ПАРОЛЬ@www.kgeorgiy.info/git-students/year2019/ФАМИЛИЯ_ИМЯ/java-advanced
```

**КОММЕНТАРИЙ ОТ КГЕОРГИЯ:**
Пожалуйста, не надо так делать!
1. Вы клонируете репозиторий по http (а не https)
2. Для этого есть [специальный механизм](https://git-scm.com/docs/git-credential-store), который работает всегда, а не только с некоторым схемами URL.

Как можно понять, вы просто сразу задаете гиту свои логин и пароль, запоминая их на будущее. Теперь вам
не придется вводить их каждый раз когда вы пушите. Это же поможет нам использовать 
[bash-скрипт](submit.sh).

Этот скрипт сделает рекурсивную копию вашего модуля, игнорируя файлы IDEA и `module-info.java`,
а также все `.java` файлы, имеющие суффикс `Test` или `Tester`.

Помните, что скрипт может насрать, если вы предварительно не запуллили Гошины правки/замечания 
с помощью другого [замечательного скрипта](refre.sh).

### Шаг 6 - а ведь есть и другие задания
Да, есть. Процесс точно обобщается и для них. Каждый раз, когда выкладываются тесты, не забывайте
пуллить их к себе в этот репозиторий, и жизнь ваша будет хороша.
